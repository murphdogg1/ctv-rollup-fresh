"use strict";(()=>{var e={};e.id=919,e.ids=[919],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},5714:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>S,patchFetch:()=>A,requestAsyncStorage:()=>E,routeModule:()=>i,serverHooks:()=>l,staticGenerationAsyncStorage:()=>_});var t={};r.r(t),r.d(t,{GET:()=>c});var o=r(9303),n=r(8716),a=r(670),p=r(7070),u=r(1926);async function c(){try{let e={hasUrl:!!process.env.NEXT_PUBLIC_SUPABASE_URL,hasServiceKey:!!process.env.SUPABASE_SERVICE_ROLE_KEY,hasAnonKey:!!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,dbEngine:process.env.DB_ENGINE,url:process.env.NEXT_PUBLIC_SUPABASE_URL?.substring(0,50)+"..."};console.log("Environment check:",e);let s=(0,u.m)();console.log("Supabase client created successfully");let{data:r,error:t}=await s.from("campaigns").select("count",{count:"exact",head:!0});if(t)return console.error("Supabase query error:",t),p.NextResponse.json({success:!1,error:t.message,envCheck:e,step:"query_failed"});return p.NextResponse.json({success:!0,message:"Supabase connection successful",count:r?.[0]?.count||0,envCheck:e,step:"success"})}catch(e){return console.error("Supabase test failed:",e),p.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error",envCheck:{hasUrl:!!process.env.NEXT_PUBLIC_SUPABASE_URL,hasAnonKey:!!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,hasServiceKey:!!process.env.SUPABASE_SERVICE_ROLE_KEY,dbEngine:process.env.DB_ENGINE},step:"client_creation_failed"})}}let i=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/test-supabase/route",pathname:"/api/test-supabase",filename:"route",bundlePath:"app/api/test-supabase/route"},resolvedPagePath:"/Users/mattmurphy/ctv-rollup/src/app/api/test-supabase/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:E,staticGenerationAsyncStorage:_,serverHooks:l}=i,S="/api/test-supabase/route";function A(){return(0,a.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:_})}},1926:(e,s,r)=>{r.d(s,{m:()=>a});var t=r(9498);let o=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;o&&n&&(0,t.eI)(o,n);let a=()=>{let e=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!s)throw Error("Supabase environment variables not configured");return(0,t.eI)(e,s,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,972,498],()=>r(5714));module.exports=t})();